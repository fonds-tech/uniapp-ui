<template>
  <demo-page>
    <demo-section title="åŸºç¡€ç”¨æ³•">
      <demo-block direction="column">
        <ui-notice-bar text="åœ¨ä»£ç é˜…è¯»è¿‡ç¨‹ä¸­äººä»¬è¯´è„è¯çš„é¢‘ç‡æ˜¯è¡¡é‡ä»£ç è´¨é‡çš„å”¯ä¸€æ ‡å‡†ã€‚" />
      </demo-block>
    </demo-section>

    <demo-section title="æ»šåŠ¨æ’­æ”¾">
      <demo-block direction="column">
        <ui-notice-bar scrollable text="åœ¨ä»£ç é˜…è¯»è¿‡ç¨‹ä¸­äººä»¬è¯´è„è¯çš„é¢‘ç‡æ˜¯è¡¡é‡ä»£ç è´¨é‡çš„å”¯ä¸€æ ‡å‡†ã€‚" />
      </demo-block>
    </demo-section>

    <!-- æ–°å¢ï¼šå…³é—­æ»šåŠ¨ -->
    <demo-section title="å…³é—­æ»šåŠ¨">
      <demo-block direction="column">
        <ui-notice-bar :scrollable="false" text="è¿™æ˜¯ä¸€æ¡ä¸ä¼šæ»šåŠ¨çš„é€šçŸ¥æ¶ˆæ¯ã€‚" />
      </demo-block>
    </demo-section>

    <!-- æ–°å¢ï¼šæ»šåŠ¨é€Ÿåº¦ -->
    <demo-section title="æ»šåŠ¨é€Ÿåº¦">
      <demo-block direction="column" align="start" :gap="16">
        <text class="demo-text">å½“å‰é€Ÿåº¦: {{ currentSpeed }}px/s</text>
        <demo-block :cols="3" :gap="16">
          <ui-button size="small" @click="currentSpeed = 30">æ…¢é€Ÿ 30</ui-button>
          <ui-button size="small" @click="currentSpeed = 60">é»˜è®¤ 60</ui-button>
          <ui-button size="small" @click="currentSpeed = 120">å¿«é€Ÿ 120</ui-button>
        </demo-block>
        <ui-notice-bar scrollable :speed="currentSpeed" text="åœ¨ä»£ç é˜…è¯»è¿‡ç¨‹ä¸­äººä»¬è¯´è„è¯çš„é¢‘ç‡æ˜¯è¡¡é‡ä»£ç è´¨é‡çš„å”¯ä¸€æ ‡å‡†ã€‚" />
      </demo-block>
    </demo-section>

    <demo-section title="å·¦ä¾§å›¾æ ‡">
      <demo-block direction="column" :gap="16">
        <ui-notice-bar icon="sound" text="åœ¨ä»£ç é˜…è¯»è¿‡ç¨‹ä¸­äººä»¬è¯´è„è¯çš„é¢‘ç‡æ˜¯è¡¡é‡ä»£ç è´¨é‡çš„å”¯ä¸€æ ‡å‡†ã€‚" />
        <ui-notice-bar icon="info-circle" text="è¿™æ˜¯ä¸€æ¡ä¿¡æ¯é€šçŸ¥ã€‚" />
        <ui-notice-bar icon="warning-circle" text="è¿™æ˜¯ä¸€æ¡è­¦å‘Šé€šçŸ¥ã€‚" />
      </demo-block>
    </demo-section>

    <!-- æ–°å¢ï¼šå›¾æ ‡æ ·å¼ -->
    <demo-section title="å›¾æ ‡æ ·å¼">
      <demo-block direction="column" :gap="16">
        <text class="demo-text">è‡ªå®šä¹‰å›¾æ ‡å¤§å°ã€é¢œè‰²å’Œç²—ç»†</text>
        <ui-notice-bar icon="sound" icon-size="40rpx" icon-color="#ee0a24" icon-weight="600" text="è‡ªå®šä¹‰å›¾æ ‡æ ·å¼çš„é€šçŸ¥æ ã€‚" />
      </demo-block>
    </demo-section>

    <!-- æ–°å¢ï¼šå³ä¾§å›¾æ ‡ -->
    <demo-section title="å³ä¾§å›¾æ ‡">
      <demo-block direction="column" :gap="16">
        <ui-notice-bar icon="sound" right-icon="right" text="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…" @click="onNoticeClick" />
        <ui-notice-bar icon="info-circle" right-icon="close" right-icon-color="#999" text="å¯å…³é—­çš„é€šçŸ¥" @click="onCloseClick" />
      </demo-block>
    </demo-section>

    <!-- æ–°å¢ï¼šå³ä¾§å›¾æ ‡æ ·å¼ -->
    <demo-section title="å³ä¾§å›¾æ ‡æ ·å¼">
      <demo-block direction="column" :gap="16">
        <text class="demo-text">è‡ªå®šä¹‰å³ä¾§å›¾æ ‡å¤§å°ã€é¢œè‰²å’Œç²—ç»†</text>
        <ui-notice-bar icon="sound" right-icon="right" right-icon-size="32rpx" right-icon-color="#1989fa" right-icon-weight="600" text="è‡ªå®šä¹‰å³ä¾§å›¾æ ‡æ ·å¼ã€‚" />
      </demo-block>
    </demo-section>

    <demo-section title="è‡ªå®šä¹‰æ ·å¼">
      <demo-block direction="column" :gap="16">
        <ui-notice-bar background="#ecf9ff" color="#1989fa" icon="info-circle" text="æŠ€æœ¯æ˜¯å¼€å‘å®ƒçš„äººçš„å…±åŒçµé­‚ã€‚" />
        <ui-notice-bar background="#fff7e6" color="#ff9500" icon="warning-circle" text="è¯·æ³¨æ„æŸ¥çœ‹é‡è¦é€šçŸ¥ã€‚" />
        <ui-notice-bar background="#ffece8" color="#ee0a24" icon="warning-circle" text="ç´§æ€¥é€šçŸ¥ï¼šç³»ç»Ÿå°†äºä»Šæ™šç»´æŠ¤ã€‚" />
      </demo-block>
    </demo-section>

    <!-- æ–°å¢ï¼šæ–‡å­—æ ·å¼ -->
    <demo-section title="æ–‡å­—æ ·å¼">
      <demo-block direction="column" :gap="16">
        <text class="demo-text">è‡ªå®šä¹‰æ–‡å­—å¤§å°å’Œç²—ç»†</text>
        <ui-notice-bar icon="sound" font-size="28rpx" text="å°å·æ–‡å­—é€šçŸ¥ã€‚" />
        <ui-notice-bar icon="sound" font-size="32rpx" font-weight="600" text="åŠ ç²—æ–‡å­—é€šçŸ¥ã€‚" />
      </demo-block>
    </demo-section>

    <!-- æ–°å¢ï¼šæœ€å°é«˜åº¦ -->
    <demo-section title="æœ€å°é«˜åº¦">
      <demo-block direction="column" :gap="16">
        <text class="demo-text">å½“å‰é«˜åº¦: {{ currentMinHeight }}</text>
        <demo-block :cols="3" :gap="16">
          <ui-button size="small" @click="currentMinHeight = '60rpx'">60rpx</ui-button>
          <ui-button size="small" @click="currentMinHeight = '80rpx'">80rpx</ui-button>
          <ui-button size="small" @click="currentMinHeight = '100rpx'">100rpx</ui-button>
        </demo-block>
        <ui-notice-bar icon="sound" :min-height="currentMinHeight" text="è‡ªå®šä¹‰é«˜åº¦çš„é€šçŸ¥æ ã€‚" />
      </demo-block>
    </demo-section>

    <demo-section title="å‚ç›´æ»šåŠ¨">
      <demo-block direction="column">
        <ui-notice-bar :text="notices" mode="vertical" icon="sound" />
      </demo-block>
    </demo-section>

    <!-- æ–°å¢ï¼šå‚ç›´æ»šåŠ¨é—´éš” -->
    <demo-section title="å‚ç›´æ»šåŠ¨é—´éš”">
      <demo-block direction="column" align="start" :gap="16">
        <text class="demo-text">å½“å‰é—´éš”: {{ currentInterval }}ms</text>
        <demo-block :cols="3" :gap="16">
          <ui-button size="small" @click="currentInterval = 2000">2ç§’</ui-button>
          <ui-button size="small" @click="currentInterval = 3000">3ç§’</ui-button>
          <ui-button size="small" @click="currentInterval = 5000">5ç§’</ui-button>
        </demo-block>
        <ui-notice-bar :text="notices" mode="vertical" icon="sound" :interval="currentInterval" />
      </demo-block>
    </demo-section>

    <!-- æ–°å¢ï¼šå‚ç›´æ»šåŠ¨åŠ¨ç”»æ—¶é•¿ -->
    <demo-section title="å‚ç›´æ»šåŠ¨åŠ¨ç”»æ—¶é•¿">
      <demo-block direction="column" align="start" :gap="16">
        <text class="demo-text">å½“å‰åŠ¨ç”»æ—¶é•¿: {{ currentDuration }}ms</text>
        <demo-block :cols="3" :gap="16">
          <ui-button size="small" @click="currentDuration = 300">300ms</ui-button>
          <ui-button size="small" @click="currentDuration = 500">500ms</ui-button>
          <ui-button size="small" @click="currentDuration = 1000">1000ms</ui-button>
        </demo-block>
        <ui-notice-bar :text="notices" mode="vertical" icon="sound" :duration="currentDuration" />
      </demo-block>
    </demo-section>

    <!-- æ–°å¢ï¼šäº‹ä»¶å¤„ç† -->
    <demo-section title="äº‹ä»¶å¤„ç†">
      <demo-block direction="column" align="start" :gap="16">
        <ui-notice-bar :text="notices" mode="vertical" icon="sound" right-icon="right" @click="onNoticeItemClick" />
        <text class="demo-text">{{ eventLog }}</text>
      </demo-block>
    </demo-section>

    <!-- æ–°å¢ï¼šè‡ªå®šä¹‰ç±»åå’Œæ ·å¼ -->
    <demo-section title="è‡ªå®šä¹‰ç±»åå’Œæ ·å¼">
      <demo-block direction="column" :gap="16">
        <ui-notice-bar icon="sound" text="è‡ªå®šä¹‰ç±»åé€šçŸ¥æ ã€‚" custom-class="my-notice-bar" />
        <ui-notice-bar icon="sound" text="è‡ªå®šä¹‰æ ·å¼é€šçŸ¥æ ã€‚" :custom-style="{ borderRadius: '16rpx', margin: '0 16rpx' }" />
      </demo-block>
    </demo-section>

    <!-- ç»¼åˆç¤ºä¾‹ - æ´»åŠ¨å…¬å‘Š -->
    <demo-section title="ç»¼åˆç¤ºä¾‹ - æ´»åŠ¨å…¬å‘Š">
      <demo-block direction="column">
        <ui-notice-bar
          :text="activityNotices"
          mode="vertical"
          icon="gift"
          icon-size="36rpx"
          icon-color="#ee0a24"
          right-icon="right"
          right-icon-color="#ee0a24"
          background="#fff0f0"
          color="#ee0a24"
          font-weight="500"
          :interval="4000"
          @click="onActivityClick"
        />
      </demo-block>
    </demo-section>

    <!-- ç»¼åˆç¤ºä¾‹ - ç³»ç»Ÿé€šçŸ¥ -->
    <demo-section title="ç»¼åˆç¤ºä¾‹ - ç³»ç»Ÿé€šçŸ¥">
      <demo-block direction="column">
        <ui-notice-bar
          scrollable
          icon="info-circle"
          icon-size="32rpx"
          icon-color="#1989fa"
          background="#e8f4ff"
          color="#1989fa"
          :speed="40"
          text="ç³»ç»Ÿå°†äºä»Šæ™š 22:00 è‡³æ¬¡æ—¥ 06:00 è¿›è¡Œä¾‹è¡Œç»´æŠ¤ï¼Œå±Šæ—¶éƒ¨åˆ†æœåŠ¡å¯èƒ½æš‚æ—¶æ— æ³•ä½¿ç”¨ï¼Œæ•¬è¯·è°…è§£ã€‚"
        />
      </demo-block>
    </demo-section>

    <!-- ç»¼åˆç¤ºä¾‹ - ç´§æ€¥è­¦å‘Š -->
    <demo-section title="ç»¼åˆç¤ºä¾‹ - ç´§æ€¥è­¦å‘Š">
      <demo-block direction="column">
        <view class="warning-notice">
          <ui-notice-bar
            scrollable
            icon="warning-circle"
            icon-size="36rpx"
            icon-color="#fff"
            icon-weight="600"
            right-icon="close"
            right-icon-color="rgba(255,255,255,0.8)"
            background="linear-gradient(135deg, #ee0a24 0%, #ff6034 100%)"
            color="#fff"
            font-size="28rpx"
            font-weight="500"
            min-height="88rpx"
            :speed="80"
            text="ã€ç´§æ€¥é€šçŸ¥ã€‘è¯·æ‰€æœ‰ç”¨æˆ·ç«‹å³æ›´æ–°å¯†ç ä»¥ä¿æŠ¤è´¦æˆ·å®‰å…¨ï¼"
            @click="onWarningClick"
          />
        </view>
      </demo-block>
    </demo-section>

    <!-- ç»¼åˆç¤ºä¾‹ - å¤šæ¡å…¬å‘Šè½®æ’­ -->
    <demo-section title="ç»¼åˆç¤ºä¾‹ - å¤šæ¡å…¬å‘Šè½®æ’­">
      <demo-block direction="column">
        <view class="announcement-box">
          <view class="announcement-header">
            <ui-icon name="bell" size="32rpx" color="#ff9500" />
            <text class="announcement-title">æœ€æ–°å…¬å‘Š</text>
          </view>
          <ui-notice-bar
            :text="announcements"
            mode="vertical"
            :scrollable="false"
            icon=""
            right-icon="right"
            background="transparent"
            color="#333"
            font-size="26rpx"
            min-height="60rpx"
            :interval="3500"
            @click="onAnnouncementClick"
          />
        </view>
      </demo-block>
    </demo-section>
  </demo-page>
</template>

<script setup lang="ts">
import { useToast } from "@/uni_modules/uniapp-ui"

definePage({
  style: { navigationBarTitleText: "NoticeBar é€šçŸ¥æ " },
})

const toast = useToast()

// åŸºç¡€æ•°æ®
const notices = ["é€šçŸ¥å†…å®¹ä¸€", "é€šçŸ¥å†…å®¹äºŒ", "é€šçŸ¥å†…å®¹ä¸‰"]

// æ»šåŠ¨é€Ÿåº¦
const currentSpeed = ref(60)

// æœ€å°é«˜åº¦
const currentMinHeight = ref("80rpx")

// å‚ç›´æ»šåŠ¨é—´éš”
const currentInterval = ref(3000)

// å‚ç›´æ»šåŠ¨åŠ¨ç”»æ—¶é•¿
const currentDuration = ref(500)

// äº‹ä»¶å¤„ç†
const eventLog = ref("ç‚¹å‡»é€šçŸ¥æ¡ç›®è§¦å‘äº‹ä»¶")

function onNoticeClick() {
  toast.text("ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…")
}

function onCloseClick() {
  toast.text("å…³é—­é€šçŸ¥")
}

function onNoticeItemClick(index: number) {
  eventLog.value = `ç‚¹å‡»äº†ç¬¬ ${index + 1} æ¡é€šçŸ¥`
  toast.text(`ç‚¹å‡»äº†ç¬¬ ${index + 1} æ¡é€šçŸ¥`)
}

// ç»¼åˆç¤ºä¾‹ - æ´»åŠ¨å…¬å‘Š
const activityNotices = ["ğŸ‰ æ–°ç”¨æˆ·æ³¨å†Œå³é€ 100 ç§¯åˆ†", "ğŸ”¥ é™æ—¶ç‰¹æƒ ï¼šå…¨åœºå•†å“ 8 æŠ˜èµ·", "ğŸ é‚€è¯·å¥½å‹å„å¾— 50 å…ƒçº¢åŒ…", "â­ VIP ä¼šå‘˜ä¸“äº«åŒå€ç§¯åˆ†"]

function onActivityClick(index: number) {
  toast.success(`æŸ¥çœ‹æ´»åŠ¨ ${index + 1} è¯¦æƒ…`)
}

// ç»¼åˆç¤ºä¾‹ - å¤šæ¡å…¬å‘Šè½®æ’­
const announcements = ["ã€å…¬å‘Šã€‘å¹³å°æœåŠ¡åè®®å·²æ›´æ–°ï¼Œè¯·æŸ¥é˜…", "ã€é€šçŸ¥ã€‘æ˜¥èŠ‚æœŸé—´ç‰©æµæ—¶æ•ˆå¯èƒ½å»¶è¿Ÿ", "ã€æ´»åŠ¨ã€‘å¹´è´§èŠ‚å¤§ä¿ƒï¼Œæ»¡ 300 å‡ 50", "ã€æé†’ã€‘è¯·åŠæ—¶å®Œæˆå®åè®¤è¯"]

function onAnnouncementClick(index: number) {
  toast.text(`æŸ¥çœ‹å…¬å‘Š ${index + 1}`)
}

function onWarningClick() {
  toast.fail("å‰å¾€å®‰å…¨ä¸­å¿ƒ")
}
</script>

<style lang="scss" scoped>
.demo-text {
  color: var(--ui-color-text-secondary);
  font-size: 24rpx;
}

.warning-notice {
  overflow: hidden;
  border-radius: 12rpx;
}

.announcement-box {
  padding: 16rpx 24rpx;
  background: #fffbe6;
  border-radius: 12rpx;
}

.announcement-header {
  gap: 12rpx;
  display: flex;
  align-items: center;
  border-bottom: 1rpx solid rgba(255, 149, 0, 0.2);
  margin-bottom: 8rpx;
  padding-bottom: 12rpx;
}

.announcement-title {
  color: #ff9500;
  font-size: 26rpx;
  font-weight: 600;
}

:deep(.my-notice-bar) {
  border: 2rpx solid #1989fa;
  border-radius: 12rpx;
}
</style>
